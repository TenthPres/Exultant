@import (reference) '_mixins';


// App Nav Bar  ("Return to App")
nav.navbar.navbar-default.navbar-fixed-top {
  margin-top:-5px;
}
div.navbar-header.hidden-sm {
  display:none;
}
div.navbar-header.hidden-xs a {
  position: fixed;
  top: 0;
  z-index: 10000;
  background: #fee;
  @media (min-width: @iconicNavThreshold) {
    height:5em;
  }
  height: 3em;
  width: 100%;
  max-width: 1200px;
  left: 50%;
  opacity: 0;
  transform: translateX(-50%);
}


body.touchpoint-template-default {

  * {
    box-sizing: border-box;
  }

  // overrides values in _mixins.less
  @headerMaxWidth: 1200px;
  @contentMaxWidth: 800px;
  @footerMaxWidth: 1200px;

  .pull-right {
    float: none;
  }

  .center-block {
    margin: 0 auto;
  }

  .text-right {
    text-align: right;
    margin-right: -0.9em;
  }

  header[role="banner"] {
    max-width: @headerMaxWidth;
  }

  div#site-footer > footer {
    max-width: @footerMaxWidth
  }

  main#site-content {
    &:not(.error) {
      max-width: @contentMaxWidth;
    }

    div > h2, article > h2, div.regform > h3 {
      #fonts.headerFormat;
    }
    h4:not(:first-child) {
      margin-top: 2em;
    }

    a.btn.btn-mini {
      padding: 0 .2em;
      display: inline-block;
    }

    .btn-group {
      display: flex;
      width:100%;
      max-width: 400px;
      margin-left: auto;
      margin-right: auto;

      .btn {
        flex: 1;
        text-align: center;
        margin-left: 0;
        margin-right: 0;
        padding: 0.5em;
      }

    }


    a.btn:not(.btn-mini),
    input.btn,
    a#login-here,
    button,
    input[type='submit'] { // TODO much of this should be moved to the main style sheets.

      cursor: pointer;

      &:not(.btn-link) {
        -webkit-appearance: none;
        border-radius: 0;
        font-size: 0.95em;
        background-color: @secondaryBtnBgColor;
        color: @secondaryBtnFgColor;
        text-decoration: none;
        padding: 0.3em 0.6em 0.4em;
        margin: .5em 1em .5em 0;
        display: inline-block;
        border: 1px solid darken(@secondaryBtnBgColor, 5%);

        &.btn-primary:not(#register-another), &.btn-success {
          background-color: @tenthGreen;
          border: 1px solid darken(@tenthGreen, 5%);

          &:hover {
            background-color: lighten(@tenthGreen, 10%);
            color: #fff;
          }
        }

        &:hover {
          background-color: lighten(@secondaryBtnBgColor, 10%);
          color: #fff;
        }

        &:focus { // TODO move to apply to literally anything that has focus.
          outline: 1px solid darken(@tenthGreen, 20%);
          z-index: 1;
        }

      }

      &.btn-link {
        background-color: transparent;
      }

      &[href^="/OnlineReg/Cancel/"] { // "Cancel this person" button
        font-size: 0.8em;
        font-weight: normal;
      }

      &.btn-xs.pull-right {
        float:right;
      }

      &.width100,
      &.btn-block {
        width:100%;
        text-align: center;
      }

    }

    a,
    a:not(.btn):not(.dropdown-item),
    button.btn-link {
      color: @tenthGreen;
      text-decoration: none;
      transition: color @transitionTime, background-color @transitionTime;
      border-radius: 0;
      padding: 0;
      border-color: @tenthGreen;
    }
    a:hover,
    button.btn-link:hover {
      color: lighten(@tenthGreen, 15%);
      text-decoration: none;
    }

    small.text-danger {
      color: @validationErrorColor;
    }

    input[type='text'],
    input[type='password'],
    input[inputmode='numeric'],
    input[type='tel'],
    select {
      border-radius: 0;
      border: 0;
      border-bottom: 1px solid @secondaryBtnBgColor;
      width: 100%;
      background-color:#fff;
      &[disabled] {
        background-color:transparent;
        border: 0;
        opacity: 0.5;
      }
      &.input-validation-error {
        border-bottom: 1px solid @validationErrorColor;
      }
    }

    span.field-validation-error {
      color: @validationErrorColor;
      font-size:0.8em;
    }
    div.validation-summary-errors {
      color: @validationErrorColor;
    }

    input[type="checkbox"] {
      margin-top: 0.5em;
    }

    table {
      width: 100%;
      tbody tr:nth-child(odd) {
        background: #ffffff99;
      }
    }
    td {
      vertical-align: top;
      padding:.4em;
    }

    .panel-heading {
      height: fit-content;
      padding: .5em 0;

      & > h3 > .btn { // "Cancel this person" button
        margin:0;
      }
    }

    .panel-collapse {
      height: fit-content;
      overflow: hidden;
      transition: height @transitionTime;

      &:not(.in) {
        height: 0;
        overflow: hidden;
      }
    }

    .form-group:not(.text-center),
    .list-group {
      padding: 0.75em 0 0;
      border-top: 1px solid #eee;
      margin: 0.75em 0 0;

      .pull-right > *:last-child {
        margin-right: 0;
      }

      .col-sm-1 {
        flex:1;
      }
      .col-sm-2 {
        flex:2;
      }
      .col-sm-3 {
        flex:3;
      }
      .col-sm-4 {
        flex:4;
      }
      .col-sm-5 {
        flex:5;
      }
      .col-sm-6 {
        flex:6;
      }
      .col-sm-7 {
        flex:7;
      }
      .col-sm-8 {
        flex:8;
      }
      .col-sm-9 {
        flex:9;
      }
      .col-sm-10 {
        flex:10;
      }
      .col-sm-11 {
        flex:11;
      }
      .col-sm-12 {
        flex:12;
      }
      div {
        display: block;
      }
    }

    address {
      opacity: 0.6;
      font-size: 0.8em;
    }

    //// login page stuff
    .loginHeader {
      position: relative;
      z-index:1;
      padding: 21% 1em 0;
      max-width:250px;
      background-size: contain;
      background-image: url('https://c4265878.ssl.cf2.rackcdn.com/brett.2002051701.TP-logo-blue-no-slogan-300x62.png');
      background-repeat: no-repeat;
      background-position:center;
      margin: 0 auto;
    }

    .form-group .text-center {
      text-align: center;
    }

    .form-group.passcode { // 2FA??
      &,
      & > .passcode-title {
        margin-bottom: 2em;
      }



      .hidden-xs {
        display:none;
      }

    }

    .account {
      .panel {
        a.forgot {
          right: 0;
          border-radius: 0;
          color: @secondaryBtnFgColor;
          background-color: @secondaryBtnBgColor;
          top: unset;
          font-size: 0.8em;
          line-height: 1.7em;
        }
      }

      .form-header {
        font-size: 1.7em;
      }

      .alert {
        background-color: fade(@validationErrorColor, 20%);
        color: @validationErrorColor;
        border: @validationErrorColor 1px dotted;
        max-width: 360px;
        width:auto;
        font-size: 0.85em;
        padding: 1em;
        margin-bottom:0;

        button.close {
          display: none;
        }
      }

      .no-header {
        display:none;
      }

      .signin-with {
        padding: 0 1em;
      }
    }

    // GIVING PAGE
    div#main.giving {
      select {
        max-width:20em;
        margin:0 auto;
        text-align: center;
        text-align-last: center;
      }

      div.col-sm-8.col-sm-offset-2 {
        text-align: center;
      }

      div.gift, div.payment-container {
        padding:1em;
        border: #999 solid 1px;
        border-radius: 0;
        margin-bottom: -1px;
        transition: all 1s;

        &.recurring.well {
          padding-bottom: 3em;

          .text-center {
            text-align: center;
            float: left;
            width:100%;
            display:block;
            position: relative;

            &.col-xs-12 { // recurrence sentence
              width:100%;
              position: absolute;
              float:left;
              left: 0;
            }

            & > div.popover { // date picker
              float: none;
              width: auto;
              z-index: 1000;
              margin-top: -10px;

              .datepicker table tr td.active.active {
                background: @tenthGreen;
              }

              div.control-group.form-group {
                margin:0;
                padding:0;
              }

            }

            @import "TouchPoint/bootstrap/popovers";

          }

          div.form-group {
            border-top:0;
            padding-bottom:1em;
          }
        }

        button.close {
          background-color: #fff;
          color:@validationErrorColor;
          border: 1px solid @validationErrorColor
        }

        .tp-input.filled .control-label,
        .tp-input.focus .control-label {
          top: -3px;
          left: 1em;
        }

        h4 {
          #fonts.headingFont;
          padding:1em 0;
        }

        & > h4 { // TODO make equivalent to h2 formatting
          font-size: 1.6em;
          padding-top:0;
        }
      }
    }
  }
}